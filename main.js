(()=>{"use strict";var e={56:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var o={},i=[],s=0;s<e.length;s++){var l=e[s],d=n.base?l[0]+n.base:l[0],c=o[d]||0,p="".concat(d," ").concat(c);o[d]=c+1;var h=r(p),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var m=a(u,n);n.byIndex=s,t.splice(s,0,{identifier:p,updater:m,references:1})}i.push(p)}return i}function a(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,a){var o=n(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=r(o[i]);t[s].references--}for(var l=n(e,a),d=0;d<o.length;d++){var c=r(o[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);n&&i[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),a&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=a):c[4]="".concat(a)),t.push(c))}},t}},365:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(601),a=r.n(n),o=r(314),i=r.n(o)()(a());i.push([e.id,"* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n.gameContainer {\n  height: 1000px; /*remove later*/\n  width: 100%;\n  /* background-color: cyan; */\n  display: flex;\n  flex-direction: column;\n}\n.topBarWrapper {\n  width: 100%;\n  /* background-color: yellow; */\n  padding: 10px;\n}\n.topBar {\n  /* background-color: red; */\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.gameTitle {\n  font-size: 20px;\n}\n.newGameButton {\n  height: 30px;\n}\n.bothGameboardsWrapper {\n  width: 100%;\n  /* height: 100px; remove later */\n  /* background-color: green; */\n  padding: 10px;\n}\n.bothGameboards {\n  width: 100%;\n  height: 100%;\n  /* background-color: orange; */\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 40px;\n}\n.gameboardWrapper {\n  height: 100%;\n  width: 100%;\n  background-color: purple;\n  padding: 10px;\n}\n.gameboard {\n  aspect-ratio: 1 / 1;\n  width: 100%;\n  height: auto;\n  max-width: 100%;\n  /* background-color: rgb(103, 255, 103); */\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  gap: 1px;\n}\n.grid-cell {\n  /* background-color: lightgray; */\n  border: 1px solid #ccc;\n}\n.hitShip {\n  background-color: red;\n}\n.notHitShip {\n  background-color: rgb(47, 255, 47);\n}\n.hitWater {\n  background-color: rgb(104, 103, 103);\n}\n.notHitWater {\n  background-color: rgb(223, 223, 223);\n}\n.bottomBarWrapper {\n  width: 100%;\n  /* background-color: rgb(255, 133, 133); */\n  padding: 10px;\n}\n.bottomBar {\n  display: flex;\n  justify-content: start;\n}\n.gameUpdate {\n  /* height: 10px; */\n  /* width: 20px; */\n  /* background-color: rgb(118, 118, 255); */\n  font-size: 18px;\n}",""]);const s=i},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var a=void 0!==r.layer;a&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,a&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0;var n=r(72),a=r.n(n),o=r(825),i=r.n(o),s=r(659),l=r.n(s),d=r(56),c=r.n(d),p=r(540),h=r.n(p),u=r(113),m=r.n(u),g=r(365),f={};function v(e){return{gameboard:{sideLength:10,cellsHit:new Set,cellShipMap:new Map,shipList:[],getShipAtCell(e){return this.cellShipMap.has(e)?this.cellShipMap.get(e):null},isShipHere(e){return!!this.getShipAtCell(e)},isCellHit(e){return this.cellsHit.has(e)},isCellInBounds(e){const[t,r]=e.split(",").map(Number);return t>=0&&t<this.sideLength&&r>=0&&r<this.sideLength},isCellValidForNewShip(e){return this.isCellInBounds(e)?this.cellShipMap.has(e)?(console.log(`coordStr in use by: ${this.cellShipMap.get(e)}`),!1):!this.cellsHit.has(e)||(console.log(`this space has been hit. are you adding ships late? ${e}`),!1):(console.log(`coordStr not in bounds: ${e}`),!1)},placeShip(e){for(const t of e)if(!this.isCellValidForNewShip(t))return console.log(`can't use coord: ${t}`),!1;let t={length:e.length,numHits:0,hit(){this.numHits+=1},isSunk(){return this.numHits>=this.length}};return e.forEach((e=>{this.cellShipMap.set(e,t)})),this.shipList.push(t),!0},receiveAttack(e){if(!this.isCellInBounds(e))return console.log(`cell out of bounds ${e}`),!1;if(this.isCellHit(e))return console.log("cell already hit"),!1;this.cellsHit.add(e);let t=this.getShipAtCell(e);return t?(t.hit(),console.log(`hit! ${e}`)):console.log(`miss: ${e}`),!0},allShipsSunk(){for(const e of this.shipList)if(!e.isSunk())return!1;return!0}},name:e}}f.styleTagTransform=m(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=h(),a()(g.A,f),g.A&&g.A.locals&&g.A.locals;let b={player1:v("player1"),player2:v("player2"),isPlayer1Turn:!0,activeGame:!1,consoleLogGameBoards(){let e=this.player1.gameboard.sideLength,t="";for(let r=0;r<e;r++)t+=` ${r}`;for(const[r,n]of[["player1",this.player1],["player2",this.player2]]){let a=n.gameboard;console.log(`${r} gameboard below`),console.log(t);for(let t=e-1;t>=0;t--){let r="";for(let n=0;n<e;n++){let e,o=`${n},${t}`,i=a.isShipHere(o),s=a.isCellHit(o);e=i?s?"!":"o":s?"x":"-",r+=`|${e}`}r+=`| ${t}`,console.log(r)}console.log(t)}},autoPositionBoatsForPlayer(e,t){for(const r of t)e.gameboard.placeShip(r)},autoPositionBoats(){this.autoPositionBoatsForPlayer(this.player1,[["2,1","2,2","2,3","2,4","2,5"],["5,7","6,7","7,7","8,7"],["0,9","1,9","2,9"],["4,3","4,4","4,5"],["6,1","6,2"]]),this.autoPositionBoatsForPlayer(this.player2,[["0,5","1,5","2,5","3,5","4,5"],["4,0","5,0","6,0","7,0"],["0,0","0,1","0,2"],["9,6","9,7","9,8"],["7,4","7,5"]]),console.log("boats in place")},clearGameboards(){this.player1=v("player1"),this.player2=v("player2")},computerAttackPlayer(){let e,t=!1;for(;!t;)e=`${Math.floor(10*Math.random())},${Math.floor(10*Math.random())}`,t=this.player1.gameboard.receiveAttack(e);console.log(`player2 hit ${e}`)},handleGameOverUI(){this.activeGame=!1;let e=this.player1.gameboard.allShipsSunk()?"Player 2 wins!":"Player 1 wins!";return console.log(e),e},handlePlayerMove(e){let t;return this.player2.gameboard.receiveAttack(e)?this.isGameOver()?this.handleGameOverUI():(this.computerAttackPlayer(),this.isGameOver()&&this.handleGameOverUI(),t="Player 1, It's your move",t):(t=`You already hit ${e}. Click a different square`,console.log(t),t)},getActivePlayerMoveFromPrompt(){let e,t;[e,t]=this.isPlayer1Turn?[this.player1,this.player2]:[this.player2,this.player1];let r=!1;for(;!r;){let n=prompt(`${e.name}, your move\nEnter coordinate in form x,y (ex. 1,1) (no spaces)`);r=t.gameboard.receiveAttack(n)}},getActivePlayerMoveConsoleVersion(){this.getActivePlayerMoveFromPrompt()},isGameOver(){return this.player1.gameboard.allShipsSunk()||this.player2.gameboard.allShipsSunk()},handleGameOver(){let e=this.player1.gameboard.allShipsSunk()?"player2 wins!":"player1 wins!";alert(e),this.activeGame=!1},buildCoordList(e,t){let[r,n]=e.split(",").map(Number),[a,o]=t.split(",").map(Number),i=[];if(r===a)for(let e=Math.min(n,o);e<=Math.max(n,o);e++)i.push(`${r},${e}`);else for(let e=Math.min(r,a);e<=Math.max(r,a);e++)i.push(`${e},${n}`);return i},manuallyPositionBoats(){let e=[5,4,3,3,2];for(const t of e){let e=!1;for(;!e;){let r="example: ('2,1' '2,5'), ('5,7' '8,7') ('0,9' '2,9') ('4,3' '4,5') ('6,1' '6,2')",n=prompt(`where do you want boat of length ${t} to start? (enter coordinates as 'x,y') ${r}`),a=prompt(`where do you want boat of length ${t} to end? (enter coordsinates as 'x,y') ${r}`),o=this.buildCoordList(n,a);o.length==t?(e=this.player1.gameboard.placeShip(o),e||alert("invalid coordinates")):alert(`wrong length ${o.length} passed (expected ${t})`)}}},positionBoatsUI(){this.autoPositionBoats()},newGameUI(){this.activeGame=!0,this.clearGameboards(),this.positionBoatsUI()},newGameConsole(){for(this.clearGameboards(),this.autoPositionBoats(),this.consoleLogGameBoards();!this.isGameOver();)this.getActivePlayerMoveConsoleVersion(),this.consoleLogGameBoards(),this.isPlayer1Turn=!this.isPlayer1Turn;this.handleGameOver()}},y=function(e){let t,r,n,a;return{gameDriver:e,initializeStateVariables(){t=document.getElementById("leftGameboard"),r=document.getElementById("rightGameboard"),n=document.getElementById("newGameButton"),a=document.getElementById("gameUpdate")},initializeScreen(){const e=document.createElement("div");e.innerHTML='\n        <div class="gameContainer">\n          <div class="topBarWrapper">\n            <div class="topBar">\n              <p class="gameTitle">Battleship</p>\n              <button class="newGameButton" id="newGameButton">Start New Game</button>\n            </div>\n          </div>\n          <div class="bothGameboardsWrapper">\n            <div class="bothGameboards">\n              <div class="gameboardWrapper">\n                <div class="gameboard" id="leftGameboard"></div>\n              </div>\n              <div class="gameboardWrapper">\n                <div class="gameboard" id="rightGameboard"></div>\n              </div>\n            </div>\n          </div>\n          <div class="bottomBarWrapper">\n            <div class="bottomBar">\n              <p class="gameUpdate" id="gameUpdate">Info about the game</p>\n            </div>\n          </div>\n        </div>\n      ';const t=e.firstElementChild;document.body.appendChild(t)},initializeEventListeners(){n.addEventListener("click",(e=>{this.gameDriver.newGameUI(),this.renderAllGameboards(),this.updateInfoBox("Player 1: It's your move")})),r.addEventListener("click",(e=>{if(!e.target.id.includes("_"))return;if(!this.gameDriver.activeGame)return;let t=e.target.id.split("_")[1],r=this.gameDriver.handlePlayerMove(t);this.renderAllGameboards(),this.updateInfoBox(r)}))},initialize(){this.initializeScreen(),this.initializeStateVariables(),this.initializeEventListeners()},updateInfoBox(e){a.innerText=e},determineCellClass(e,t){let r,n=e===this.gameDriver.player1,a=e.gameboard.isShipHere(t),o=e.gameboard.isCellHit(t);return r=a?o?"hitShip":"notHitShip":o?"hitWater":"notHitWater",n||"notHitShip"!=r||(r="notHitWater"),r},renderGameboard(e){let t=e===this.gameDriver.player1?"left":"right";const r=document.getElementById(`${t}Gameboard`);r.innerHTML="";for(let n=9;n>=0;n--)for(let a=0;a<10;a++){const o=`${a},${n}`;let i=this.determineCellClass(e,o);const s=document.createElement("div");s.classList.add("grid-cell"),s.classList.add(i),s.id=`${t}_${o}`,r.appendChild(s)}},renderRightGameboard(){this.renderGameboard(this.gameDriver.player2)},renderLeftGameboard(){this.renderGameboard(this.gameDriver.player1)},renderAllGameboards(){this.renderLeftGameboard(),this.renderRightGameboard()}}}(b);y.initialize(),y.renderAllGameboards(),window.gameDriver=b,window.screenController=y})();